<template>
  <AppPage show-footer>
    <!-- <div class="flex">
      <n-card class="min-w-200 w-30%">
        <div class="flex items-center">
          <n-avatar
            round
            :size="60"
            :src="userStore.avatar?.[0]?.url || userEmpty"
            class="flex-shrink-0"
          />
          <div class="ml-20 flex-col">
            <span class="text-20 opacity-80">
              Xin ch√†o, {{ userStore.nickName ?? userStore.username }}
            </span>
            <span class="mt-4 opacity-50">Vai tr√≤ hi·ªán t·∫°i: {{ "Owner" }}</span>
          </div>
        </div>

        <p class="mt-28 text-14 opacity-60">
          M·ªôt ng∆∞·ªùi g·∫ßn nh∆∞ c√≥ th·ªÉ th√†nh c√¥ng trong b·∫•t k·ª≥ vi·ªác g√¨ m√† h·ªç c√≥ ni·ªÅm
          ƒëam m√™ v√¥ h·∫°n.
        </p>
      </n-card>
      <n-card
        class="ml-12 w-70%"
        title="‚ú® Ch√†o m·ª´ng ƒë·∫øn v·ªõi ·ª©ng d·ª•ng qu·∫£n tr·ªã"
      >
        <p class="opacity-60">
          ƒê√¢y l√† m·ªôt template qu·∫£n tr·ªã backend v·ªõi phong c√°ch t·ªëi gi·∫£n, bao g·ªìm
          gi·∫£i ph√°p frontend v√† backend, frontend s·ª≠ d·ª•ng Vite + Vue3 + Pinia +
          Unocss, backend s·ª≠ d·ª•ng Nestjs + TypeOrm + MySql, ƒë∆°n gi·∫£n d·ªÖ d√πng,
          ƒë·∫πp m·∫Øt, tr·∫£i qua h√†ng ch·ª•c l·∫ßn t√°i c·∫•u tr√∫c v√† chƒÉm ch√∫t chi ti·∫øt!
        </p>
        <footer class="mt-12 flex items-center justify-end">
          <n-button
            type="primary"
            ghost
            tag="a"
            href="https://isme.top"
            target="__blank"
          >
            T√†i li·ªáu ph√°t tri·ªÉn
          </n-button>
          <n-button
            type="primary"
            class="ml-12"
            tag="a"
            href="https://github.com/zclzone/vue-naive-admin/tree/2.x"
            target="__blank"
          >
            Kho m√£ ngu·ªìn
          </n-button>
        </footer>
      </n-card>
    </div>
    <div class="mt-12 flex">
      <n-card class="w-50%" title="üíØ T√≠nh nƒÉng" segmented>
        <template #header-extra>
          <span class="text-highlight opacity-90"
            >üëè Tr·∫£i qua h√†ng ch·ª•c l·∫ßn t√°i c·∫•u tr√∫c v√† chƒÉm ch√∫t chi ti·∫øt</span
          >
        </template>

        <ul class="opacity-90">
          <li class="py-4">
            üÜí S·ª≠ d·ª•ng
            <b>Vue3</b>
            c√¥ng ngh·ªá ch·ªß ƒë·∫°o:
            <span class="text-highlight">Vite + Vue3 + Pinia</span>
          </li>
          <li class="py-4">
            üçá S·ª≠ d·ª•ng framework
            <b>Atomic CSS</b>
            :
            <span class="text-highlight">Unocss</span>
            , thanh l·ªãch, nh·∫π, d·ªÖ s·ª≠ d·ª•ng
          </li>
          <li class="py-4">
            ü§π S·ª≠ d·ª•ng gi·∫£i ph√°p icon ch·ªß ƒë·∫°o
            <span class="text-highlight">iconify + unocss</span>
            , h·ªó tr·ª£ icon t√πy ch·ªânh v√† render ƒë·ªông
          </li>
          <li class="py-4">
            üé® S·ª≠ d·ª•ng Naive UI,
            <span class="text-highlight"
              >phong c√°ch code c·ª±c k·ª≥ ƒë∆°n gi·∫£n v√† thi·∫øt k·∫ø giao di·ªán s·∫°ch
              s·∫Ω</span
            >
            , th·∫©m m·ªπ tr·ª±c tuy·∫øn, t√πy ch·ªânh theme d·ªÖ d√†ng
          </li>
          <li class="py-4">
            üëè Thi·∫øt k·∫ø c·∫•u tr√∫c file ti√™n ti·∫øn v√† d·ªÖ hi·ªÉu, nhi·ªÅu module
            <b>zero coupling</b>
            , x√≥a m·ªôt module nghi·ªáp v·ª• kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c module kh√°c
          </li>
          <li class="py-4">
            üöÄ
            <span class="text-highlight">Thi·∫øt k·∫ø route ph·∫≥ng</span>
            , m·ªói component ƒë·ªÅu c√≥ th·ªÉ l√† m·ªôt page, t·∫°m bi·ªát v·∫•n ƒë·ªÅ kh√≥
            implement KeepAlive c·ªßa multi-level route
          </li>

          <li class="py-4">
            üçí
            <span class="text-highlight">T·∫°o route ƒë·ªông d·ª±a tr√™n quy·ªÅn</span>
            , kh√¥ng c·∫ßn ƒë·ªãnh nghƒ©a route th√™m,
            <span class="text-highlight">ph√¢n bi·ªát ƒë∆∞·ª£c 403 v√† 404</span>
            , thay v√¨ kh√¥ng c√≥ quy·ªÅn c≈©ng nh·∫£y 404
          </li>
          <li class="py-4">
            üîê T√≠ch h·ª£p Redis
            <span class="text-highlight">refresh kh√¥ng c·∫£m nh·∫≠n</span>
            , tr·∫°ng th√°i ƒëƒÉng nh·∫≠p ng∆∞·ªùi d√πng c√≥ th·ªÉ ki·ªÉm so√°t, b·∫£o m·∫≠t v√† tr·∫£i
            nghi·ªám kh√¥ng th·ªÉ thi·∫øu
          </li>
          <li class="py-4">
            ‚ú® D·ª±a tr√™n Naive UI ƒë√≥ng g√≥i
            <span class="text-highlight">message</span>
            ph∆∞∆°ng th·ª©c c√¥ng c·ª• to√†n c·ª•c, h·ªó tr·ª£ nh·∫Øc nh·ªü h√†ng lo·∫°t, h·ªó tr·ª£ chia
            s·∫ª instance gi·ªØa c√°c trang
          </li>
          <li class="py-4">
            ‚ö°Ô∏è D·ª±a tr√™n Naive UI ƒë√≥ng g√≥i c√°c component nghi·ªáp v·ª• th∆∞·ªùng d√πng,
            bao g·ªìm
            <span class="text-highlight">Page</span>
            component,
            <span class="text-highlight">CRUD</span>
            table component v√†
            <span class="text-highlight">Modal</span>
            component, gi·∫£m thi·ªÉu nhi·ªÅu c√¥ng vi·ªác l·∫∑p l·∫°i
          </li>
        </ul>

        <n-divider class="mb-0! mt-12!">
          <p class="text-14 opacity-60">
            üëâNh·∫•p v√†o
            <b class="mx-2 transition hover:text-primary">
              <a href="https://isme.top" target="_blank">Xem th√™m</a>
            </b>
            ƒë·ªÉ xem th√™m t√≠nh nƒÉng h·ªØu √≠ch, ƒëang ph√°t tri·ªÉn li√™n t·ª•c...
          </p>
        </n-divider>
      </n-card>

      <n-card class="ml-12 w-50%" title="Th·ªëng k√™ theo danh m·ª•c" segmented>
        <VChart :option="skillOption" autoresize />
      </n-card>
    </div>

    <n-card class="mt-12" title="‚ö°Ô∏è Xu h∆∞·ªõng" segmented>
      <div class="h-400">
        <VChart :option="trendOption" autoresize />
      </div>
    </n-card> -->
    <h1 class="">T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn...</h1>
  </AppPage>
</template>

<script setup>
import userEmpty from "@/public/img/user_empty.jpg";
import { BarChart, LineChart, PieChart } from "echarts/charts";
import {
  GridComponent,
  LegendComponent,
  TooltipComponent,
} from "echarts/components";
import * as echarts from "echarts/core";
import { UniversalTransition } from "echarts/features";
import { CanvasRenderer } from "echarts/renderers";
import VChart from "vue-echarts";
import { useUserStore } from "@/store";

const userStore = useUserStore();
const dataOverview = ref([]);

echarts.use([
  TooltipComponent,
  GridComponent,
  LegendComponent,
  BarChart,
  LineChart,
  CanvasRenderer,
  UniversalTransition,
  PieChart,
]);

const trendOption = {
  tooltip: {
    trigger: "axis",
    axisPointer: {
      type: "cross",
      crossStyle: {
        color: "#999",
      },
    },
  },
  legend: {
    top: "5%",
    data: ["star", "fork"],
  },
  xAxis: [
    {
      type: "category",
      data: [
        "Th√°ng 1",
        "Th√°ng 2",
        "Th√°ng 3",
        "Th√°ng 4",
        "Th√°ng 5",
        "Th√°ng 6",
        "Th√°ng 7",
        "Th√°ng 8",
        "Th√°ng 9",
        "Th√°ng 10",
        "Th√°ng 11",
        "Th√°ng 12",
      ],
      axisPointer: {
        type: "shadow",
      },
    },
  ],
  yAxis: [
    {
      type: "value",
      min: 0,
      max: 3000,
      interval: 500,
      axisLabel: {
        formatter: "{value}",
      },
    },
    {
      type: "value",
      min: 0,
      max: 500,
      interval: 100,
      axisLabel: {
        formatter: "{value}",
      },
    },
  ],
  series: [
    {
      name: "star",
      type: "line",
      data: [200, 320, 520, 550, 600, 805, 888, 950, 1300, 2503, 2702, 2712],
    },
    {
      name: "fork",
      yAxisIndex: 1,
      type: "bar",
      data: [40, 72, 110, 115, 121, 175, 180, 201, 260, 398, 423, 455],
    },
  ],
};

const getDashboardOverview = async () => {
  try {
    const resOverview = await api.getDashboardOverview();
    dataOverview.value =
      resOverview?.data?.data?.top_categories?.map((item) => ({
        name: item.category_name,
        value: item.orders,
      })) || [];
  } catch (e) {
    console.error("getDashboardOverview error", e);
    dataOverview.value = [];
  }
};

onMounted(async () => {
  await getDashboardOverview();
});

const skillOption = computed(() => ({
  tooltip: {
    trigger: "item",
    formatter({ name, value }) {
      return `${name} ${value}%`;
    },
  },
  legend: {
    left: "center",
  },
  series: [
    {
      top: "12%",
      type: "pie",
      radius: ["35%", "90%"],
      avoidLabelOverlap: true,
      itemStyle: {
        borderRadius: 10,
        borderColor: "#fff",
        borderWidth: 2,
      },
      label: {
        show: false,
        position: "center",
      },
      emphasis: {
        label: {
          show: true,
          fontSize: 36,
          fontWeight: "bold",
        },
      },
      labelLine: {
        show: false,
      },
      data: dataOverview.value,
    },
  ],
}));
</script>
